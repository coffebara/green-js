<!-- 
    로컬 스토리지..크기 5-10MB(브라우저별로 상이)
    로컬 스토리지의 생성과 소멸, 공유
    윈도우에 상관없이 웹 서버(웹 사이트)당 하나씩 생성
    브라우저 종료하거나 컴퓨터가 꺼져도 존재
    웹 사이트의 모든 웹 페이지가 로컬 스토리지 공유
    로컬 스토리지 용도
    오프라인 상태에서 웹 어플리케이션이 로컬 컴퓨터의 로컬 스토리지에 저장 가능
 -->
 <!DOCTYPE html>
 <html lang="en">
 <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>로컬 스토리지</title>
    <script>
        // 아래 명령어를 통해 함수를 실행시킴
        // 이 함수는 이름이 없기 떄문에 무명함수
        window.onload = function() {
            // countbtn, clearbtn 태그 객체 생성
            var countbtn = document.getElementById("countbtn");
            var clearbtn = document.getElementById("clearbtn");

            countbtn.onclick = function() {
                // localStorage라고 하는 저장소가 있다, 정보 만료 날짜가 없다(무기한)
                // localStarage는 키와 값의 형태로 저장한다
                // localStorage를 생성하지 않았을 떄
                if(typeof(localStorage != "undefined")) {
                    console.log(typeof(localStorage != "undefined"));
                    // 이전에 localStorage.clickcount가 됬다면
                    if(localStorage.clickcount) {
                        localStorage.clickcount = Number(localStorage.clickcount) +1;
                    }
                    else {
                        localStorage.clickcount = 1;
                    }
                    document.getElementById("counter").innerHTML =
                        "카운터의 현재 횟수는 " + localStorage.clickcount + "입니다!";
                }
                // localStorage == "undefined" (정의되지 않았다면)
                else {
                    document.getElementById("counter").innerHTML = 
                    "이 문장은 사용자의 웹 브라우저가 Web Storage API를 지원하지 않을 때 나타납니다!";
                }
            }
            // 클리어 버튼을 클릭하면 (무명함수 실행)
            clearbtn.onclick = function() {
                // localStorage.clear() 메소드를 활용해 localStorage를 초기화
                localStorage.clear();
                document.getElementById("counter").innerHTML = 
                "카운터의 현재 횟수는 " + localStorage.clickcount + "입니다!";
            }
        }
        // localStorage 컴퓨터를 껐다 켜도 저장된 데이터느 ㄴ지워지지 않는다
        // 삭제는 리셋을 클릭 localStorage.clear() 초기화
    </script>
 </head>
 <body>
    <h2>localStorage로 데이터 저장하기</h2><hr>
    <p>브라우저 탭이나 창을 닫아도 Counter의 횟수는 초기화 되지 않습니다.</p>
    <p>
        <button id="countbtn">카운터 증가</button>
        <button id="clearbtn">카운터 리셋</button>
    </p>
    <div id="counter"></div>
 </body>
 </html>